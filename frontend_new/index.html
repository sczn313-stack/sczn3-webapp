<!-- sczn3-webapp/frontend_new/index.html  (FULL REPLACEMENT) -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Shooter Experience Card</title>

  <style>
    body{font-family:serif;padding:20px;margin:0;text-align:center;background:#fff;}
    h1{line-height:1.1;margin:0 0 26px 0;font-weight:500;}
    .sec-word{font-weight:900;color:#b00000;margin-left:10px;display:inline-block;}

    .uploadBlock{width:100%;margin:26px 0 10px 0;text-align:center;}

    /* IMPORTANT: use a REAL BUTTON (not label) */
    #uploadBtn{
      display:inline-block;
      background:#2f5f73;
      color:#fff;
      padding:14px 22px;
      border-radius:12px;
      font-weight:700;
      cursor:pointer;
      border:none;
      -webkit-tap-highlight-color:transparent;
      user-select:none;
      touch-action:manipulation;
    }
    #uploadBtn:active{transform:scale(.99);}

    /* Keep the input present but hidden */
    #targetPhoto{
      position:absolute;
      left:-9999px;
      width:1px;height:1px;
      opacity:0;
    }

    .uploadHint{margin-top:10px;font-style:italic;color:#8b0000;}

    .thumbWrap{
      display:none;
      margin:16px auto 0 auto;
      max-width:92%;
      position:relative;
      border:1px solid #cfcfcf;
      border-radius:10px;
      overflow:hidden;
      background:#fff;
    }
    img#thumb{
      display:block;
      width:100%;
      height:auto;
      user-select:none;
      -webkit-user-drag:none;
      pointer-events:none; /* taps go to overlay */
    }
    svg#tapLayer{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      pointer-events:auto;
      touch-action:manipulation;
    }

    .tapTools{display:none;margin:10px auto 0 auto;max-width:92%;text-align:center;}
    .toolBtn{
      display:inline-block;
      margin:6px 6px 0 6px;
      padding:10px 14px;
      border-radius:999px;
      border:2px solid rgba(0,0,0,.18);
      background:#fff;
      font-weight:800;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color:transparent;
      touch-action:manipulation;
    }

    label.dist{display:block;margin-top:26px;font-weight:600;}
    input[type="number"]{margin-top:6px;padding:8px 10px;font-size:18px;width:220px;text-align:left;}

    .pillBtn{
      display:inline-block;
      margin-top:22px;
      padding:12px 22px;
      border-radius:999px;
      font-weight:700;
      text-decoration:none;
      text-align:center;
      -webkit-tap-highlight-color:transparent;
      user-select:none;
      touch-action:manipulation;
      border:1px solid rgba(0,0,0,.12);
    }
    .primary{background:#e6f0ff;color:#1f4fd8;}

    #pressToSee{
      margin-top:26px;
      display:inline-block;
      padding:10px 12px;
      border:3px solid #2f5f73;
      border-radius:10px;
      background:#fff;
      color:#2f5f73;
      font-weight:900;
      text-decoration:none;
      max-width:92%;
      line-height:1.15;
      -webkit-tap-highlight-color:transparent;
      user-select:none;
      touch-action:manipulation;
    }
    #pressToSee.disabled{
      border-color:#d7d7d7;
      color:#9aa0a6;
      background:#f5f5f5;
      pointer-events:none;
      opacity:.7;
    }

    /* tiny live indicator */
    #miniStatus{margin-top:10px;font-family:monospace;font-size:12px;opacity:.75;}
  </style>
</head>

<body>
  <h1>
    Shooter<br>
    Experience<br>
    Card<span class="sec-word">SEC</span>
  </h1>

  <div class="uploadBlock">
    <button id="uploadBtn" type="button">UPLOAD TARGET PHOTO or TAKE PICTURE</button>
    <input id="targetPhoto" type="file" accept="image/*" capture="environment" />

    <div class="uploadHint">INSURE ALL 4 CORNERS</div>

    <div class="thumbWrap" id="thumbWrap">
      <img id="thumb" alt="Target thumbnail preview" />
      <svg id="tapLayer" viewBox="0 0 100 100" preserveAspectRatio="none"></svg>
    </div>

    <div class="tapTools" id="tapTools">
      <button class="toolBtn" id="clearTapsBtn" type="button">CLEAR TAPS</button>
    </div>

    <div id="miniStatus">status: booting…</div>
  </div>

  <label class="dist" for="distanceYards">ADJUST DISTANCE (yards)</label>
  <input id="distanceYards" type="number" value="100" min="1" step="1" />

  <br><br>

  <a href="#" class="pillBtn primary" id="buyMoreBtn">BUY MORE TARGETS</a>

  <br>

  <a href="#" class="disabled" id="pressToSee">YOUR SCORE / SCOPE CLICKS / SHOOTING TIPS</a>

  <!-- Use your existing index.js (Tap N Score + sessionStorage) -->
  <script src="./index.js?v=101"></script>

  <!-- HARD FAILSAFE: if index.js doesn’t attach, this still opens the picker -->
  <script>
    (function(){
      const status = document.getElementById("miniStatus");
      const btn = document.getElementById("uploadBtn");
      const input = document.getElementById("targetPhoto");

      function setStatus(t){ if(status) status.textContent = "status: " + t; }

      window.addEventListener("load", () => setStatus("ready"));

      if (btn && input){
        btn.addEventListener("click", (e) => {
          e.preventDefault();
          input.value = "";
          setStatus("upload click");
          input.click();
        });
      } else {
        setStatus("missing btn/input");
      }

      if (input){
        input.addEventListener("change", () => {
          setStatus(input.files && input.files[0] ? "file selected" : "no file");
        });
      }
    })();
  </script>
</body>
</html>

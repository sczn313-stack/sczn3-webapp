<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,viewport-fit=cover"
    />
    <title>SCZN3 — Frontend New</title>

    <!-- Styles (keep) -->
    <link rel="stylesheet" href="./styles.css" />

    <!-- SCZN3 BACKEND LOCK — DO NOT EDIT -->
    <script>
      window.SZN3_API_BASE = "https://sczn3-webapp-213.onrender.com";
    </script>
  </head>

  <body>
    <div class="wrap">
      <h1>SCZN3 — Frontend New</h1>

      <div class="card">
        <div class="row">
          <div>
            <div class="label">API:</div>
            <div id="apiStatus" class="pill">CHECKING…</div>
          </div>
          <div class="grow">
            <div class="label">API URL:</div>
            <div id="apiUrlLabel" class="mono">—</div>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>Settings</h2>

        <div class="grid2">
          <div>
            <label class="label" for="distanceYards">Distance (yards)</label>
            <input id="distanceYards" type="number" value="100" />
          </div>

          <div>
            <label class="label" for="moaPerClick">MOA per click</label>
            <input id="moaPerClick" type="number" step="0.01" value="0.25" />
          </div>

          <div class="span2">
            <label class="label" for="moaMode">MOA mode</label>
            <select id="moaMode">
              <option value="true">True MOA (1.047" @ 100y)</option>
              <option value="shooter">Shooter MOA (1.000" @ 100y)</option>
            </select>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>Bull + POIB (inches)</h2>

        <div class="grid2">
          <div>
            <label class="label" for="bullX">Bull X (in)</label>
            <input id="bullX" type="number" step="0.01" value="0.00" />
          </div>

          <div>
            <label class="label" for="bullY">Bull Y (in)</label>
            <input id="bullY" type="number" step="0.01" value="0.00" />
          </div>

          <div>
            <label class="label" for="poibX">POIB X (in)</label>
            <input id="poibX" type="number" step="0.01" value="0.00" />
          </div>

          <div>
            <label class="label" for="poibY">POIB Y (in)</label>
            <input id="poibY" type="number" step="0.01" value="0.00" />
          </div>
        </div>
      </div>

      <div class="card">
        <h2>Photo</h2>

        <div class="row">
          <input id="fileInput" type="file" accept="image/*" />
          <div id="fileName" class="mono">No file chosen</div>
        </div>

        <div class="row">
          <button id="analyzeBtn" type="button">Analyze (Auto POIB)</button>
          <button id="calcBtn" type="button">Calculate</button>
        </div>

        <img id="previewImg" alt="preview" style="display:none; max-width:100%; border-radius:12px; margin-top:12px;" />
      </div>

      <div class="card">
        <h2>Results</h2>

        <div class="grid2">
          <div>
            <div class="label">Windage Direction</div>
            <div id="windDir" class="value">—</div>
          </div>
          <div>
            <div class="label">Elevation Direction</div>
            <div id="elevDir" class="value">—</div>
          </div>

          <div>
            <div class="label">ΔX (inches)</div>
            <div id="dxIn" class="value">—</div>
          </div>
          <div>
            <div class="label">ΔY (inches)</div>
            <div id="dyIn" class="value">—</div>
          </div>

          <div>
            <div class="label">Windage MOA</div>
            <div id="dxMoa" class="value">—</div>
          </div>
          <div>
            <div class="label">Elevation MOA</div>
            <div id="dyMoa" class="value">—</div>
          </div>

          <div>
            <div class="label">Windage Clicks</div>
            <div id="dxClicks" class="value">—</div>
          </div>
          <div>
            <div class="label">Elevation Clicks</div>
            <div id="dyClicks" class="value">—</div>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>Debug</h2>
        <pre id="debugBox" class="mono" style="white-space:pre-wrap; word-break:break-word; margin:0;">—</pre>
      </div>
    </div>

    <!-- IMPORTANT: app.js must load AFTER the SZN3_API_BASE lock -->
    <script src="./app.js"></script>
  </body>
</html>
